<% include  layout/header.ejs %>
<% include  layout/navbar.ejs %>

    <section class="content">
        <div class="container-fluid">
            <div class="row clearfix">
               <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="card">
                        <div class="header">
                            <h2>Edit User</h2>
                        </div>
                        <div class="body">
                            <div class="row clearfix">
                                <div class="col-sm-12">
                                <form  enctype='multipart/form-data' method="post" action="updateuser" id="users">
                                  <input type="hidden" name="hiddenimage" value="<%=users_data.profileImage%>" >
                                  <input type="hidden" name="id" value="<%=users_data.id%>" >

                                    <div class="form-group">
                                       <label>Profile Image</label>
                                         <div class="image2">
                                                  <% if(users_data.profileImage=="") { %>
                                                  <img id="blah2" src="../images/img.jpg"  alt="User">
                                                  <% } else { %>
                                                  <img id="blah2" src="../images/users/<%=users_data.profileImage%>"  alt="User">
                                                  <% } %>
                                          </div>
                                    </div>
                                    <div class="form-group" style="display:none">
                                      <div class="form-line">
                                            <input type="file" id="profieimage" accept="images/*" name="image" class="form-control" placeholder="Image">
                                        </div>
                                    </div>
                                    <div class="row clearfix">
                                      <div class="col-sm-6">
                                          <div class="form-group">
                                            <label for="" class="col-sm-5 control-label">Name</label>
                                              <div class="form-line">
                                                  <input type="text" id="username" value="<%=users_data.username%>" name="name" class="form-control" placeholder="" required>
                                              </div>
                                          </div>
                                      </div>
                                      <div class="col-sm-6">
                                        <div class="form-group">
                                          <label for="" class="col-sm-5  control-label">Country Name</label>
                                            <div class="form-line">
                                                <input type="text" name="country" value="<%=users_data.country%>"class="form-control" placeholder="" required>
                                            </div>
                                        </div>
                                    </div>
                                      
                                  </div>
                                    <div class="row clearfix">
                                      <div class="col-sm-12">
                                        <div class="form-group">
                                          <label  class="col-sm-5  control-label">Email Address</label>
                                            <div class="form-line">
                                                <input type="email" name="email" value="<%=users_data.email%>"class="form-control" placeholder="" required>
                                            </div>
                                        </div>
                                    </div>
                                    </div>
                                    <div class="row clearfix">
                                      <div class="col-sm-6">
                                        <div class="form-group">
                                          <label  class="col-sm-5  control-label">City</label>
                                            <div class="form-line">
                                                <input type="text" value="<%=users_data.city%>" name="city" class="form-control" placeholder="" required>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                      <div class="form-group">
                                        <label for="" class="col-sm-5 control-label">Age</label>
                                          <div class="form-line">
                                              <input type="number" name="age" value="<%=users_data.age%>"class="form-control" placeholder="" required>
                                          </div>
                                      </div>
                                  </div>
                                    </div>
                                    <div class="row clearfix">  
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                              <label for="Phone" class="col-sm-5 control-label">Date of Birth</label>
                                                <div class="form-line">
                                                    <input type="date" name="dob" value="<%=users_data.dob%>"class="form-control" id="txtDate" required >
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                        <div class="form-group">
                                          <label for="" class="col-sm-5 control-label">Gender</label>
                                          <div class="col-sm-10">
                                              <div class="">
                                                <input type="radio" id="male"  name="gender" value="1" <%=(users_data.gender== 1) ? 'checked' :''%>>
                                                <label class="label-text" for="male">Male</label>
                                                <input type="radio" id="female" name="gender" value="2" <%=(users_data.gender== 2) ? 'checked' :''%>>
                                                <label class="label-text" for="female">Female</label>
                                              </div> 
                                          </div>
                                      </div>
                                    </div>                            
                                     <div class="form-group">
                                         <input type="submit" id="updatebtn"  id="savebtn" class="btn btn-primary m-t-15 waves-effect" value="Submit">
                                         <span id="message"></span>
                                    </div>
                            </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                
            </div>
        </div>
    </section>
<% include  layout/footer.ejs %>
<script src="https://cdnjs.cloudflare.com/ajax/libs/geocomplete/1.7.0/jquery.geocomplete.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAeE84dgZLx40n1DwZUS6Cggul9dARQhtk&libraries=places"></script>

<script type="text/javascript">

$('#blah2').click(function(){
 $('#profieimage').click();
 });
 

 $.validator.addMethod("lettersonly", function (value, element) {
    return this.optional(element) || /^[^-\s][a-zA-Z ]+$/i.test(value);
  }, 'Please check the format');
  jQuery.validator.addMethod("Email", function(value, element) {
  return this.optional( element ) || /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test( value );
}, 'Please enter a valid email address.');
  jQuery.validator.addMethod("countrycode", function(value, element) {
  return this.optional( element ) ||/^\+?\d+$/.test( value );
  },'Please enter a valid Country code.');
  $.validator.addMethod("country", function (value, element) {
    return this.optional(element) || /^[^-\s][a-zA-Z\s-]+$/i.test(value);
  }, 'Please enter valid Country Name');
  
  $("#users").validate({
    rules: {
      name: {
        required: true,
        lettersonly: true
      },
      email: {
        required: true,
        Email: true
      },
      country:{
          required:true,
          country:true
      },
      city:{
        required:true,
      },
      age:{
        required:true,
      },
      
    },
    messages: {
      name: {
        required: "Name field is required."

      },
      email: {
        required: "Email field is required.",
      },
      country: {
        required: "Country field is required."
      },
      city:{
        required:"City field is required."
      },
      age:{
        required: "Age field is required"
      }
    }

  });

  var dateControler = {
        		    currentDate : null
        		}

        		 $(document).on( "change", "#txtDate",function( event, ui ) {
        		        var now = new Date();
        		        var selectedDate = new Date($(this).val());
        		        
        		        if(selectedDate > now) {
        		            $(this).val(dateControler.currentDate)
        		        } else {
        		            dateControler.currentDate = $(this).val();
        		        }
        		    });
</script>